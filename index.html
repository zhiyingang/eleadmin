<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>
<script src="/ele/util.js"></script>

<link rel="stylesheet" type="text/css" href="table.css">
<script src="//unpkg.com/vue/dist/vue.js"></script>
<script src="//unpkg.com/vue-resource@1.0.3/dist/vue-resource.min.js"></script>
<script src="//unpkg.com/element-ui/lib/index.js"></script>
<div id="app">
    <template>

<!--head start-->

    <el-menu theme="dark" default-active="1" class="el-menu-demo" mode="horizontal" @select="handleSelect">
      <el-menu-item index="1">处理中心</el-menu-item>
      <el-submenu index="2">
        <template slot="title">我的工作台</template>
        <el-menu-item index="2-1">选项1</el-menu-item>
        <el-menu-item index="2-2">选项2</el-menu-item>
        <el-menu-item index="2-3">选项3</el-menu-item>
      </el-submenu>
      <el-menu-item index="3">订单管理</el-menu-item>
    </el-menu>

<!--head end-->

    <el-row class="tac">

    <!--sidebar start-->
        <el-col :span="4">
          <h5>带 icon</h5>
          <el-menu default-active="2" class="el-menu-vertical-demo" @open="handleOpen" @close="handleClose">
            <el-submenu index="1">
              <template slot="title"><i class="el-icon-message"></i>导航一</template>
              <el-menu-item-group title="分组一">
                <el-menu-item index="1-1">选项1</el-menu-item>
                <el-menu-item index="1-2">选项2</el-menu-item>
              </el-menu-item-group>
              <el-menu-item-group title="分组2">
                <el-menu-item index="1-3">选项3</el-menu-item>
              </el-menu-item-group>
            </el-submenu>
            <el-menu-item index="2"><i class="el-icon-menu"></i>导航二</el-menu-item>
            <el-menu-item index="3"><i class="el-icon-setting"></i>导航三</el-menu-item>
          </el-menu>
        </el-col>
    <!--sidebar end-->

          <el-col :span=16>
            <el-button plain @click.native="open3">
                成功
            </el-button>
            <el-button plain @click.native="open4">
                警告
            </el-button>
            <el-button plain @click.native="open5">
                消息
            </el-button>
            <el-button plain @click.native="open6">
                错误
            </el-button>

            <el-input placeholder="搜索" class="right_search" icon="search" v-model="input2" @click="handleIconClick" @keyup.enter.native="handleIconClick">
            </el-input>

            <el-table :data="tableData" border style="width: 100%" height="1100">
                <el-table-column fixed prop="date" label="日期" width="150">
                </el-table-column>
                <el-table-column prop="name" label="姓名" width="120">
                </el-table-column>
                <el-table-column prop="province" label="省份" width="120">
                </el-table-column>
                <el-table-column prop="city" label="市区" width="120">
                </el-table-column>
                <el-table-column prop="address" label="地址" width="300">
                </el-table-column>
                <el-table-column prop="zip" label="邮编" width="120">
                </el-table-column>
                <el-table-column :context="_self" inline-template label="操作" width="150">
                    <div>
                        <el-button size="small" @click="handleEdit($index, row)">
                            编辑
                        </el-button>
                        <el-button size="small" type="danger" @click="handleDelete($index, row)">
                            删除
                        </el-button>
                    </div>
                </el-table-column>
            </el-table>

        </el-col>

    </el-row>

    </template>

    <script>

    var Main = {
    data() {
      return {
        input2: "",
        tableData1: [],
        tableData: [],
      }
    },
    beforeMount: function(){
        this.$http.get("/ele/echo.php?").then((response) => {
          if (response.status !== 200) {
            this.$message({
              type: 'info',
              message: '请求失败, 请重试'
            }); 
          }
          this.tableData = JSON.parse(response.data)  
        }, (response) => {
          this.$message({
            type: 'info',
            message: '请求失败, 请重试'
          }); 
        });
    },
    methods: {
      handleEdit(index, row) {
        console.log(index, row);
      },
      handleDelete(index, row) {
        console.log(index, row);
      },
      open3() {
        this.$notify({
          title: '成功',
          message: '这是一条成功的提示消息',
          type: 'success'
        });
      },

      open4() {
        this.$notify({
          title: '警告',
          message: '这是一条警告的提示消息',
          type: 'warning'
        });
      },

      open5() {
        this.$notify.info({
          title: '消息',
          message: '这是一条消息的提示消息'
        });

        setInterval(function(){
            this.$notify.info({
            title: '消息',
            message: '这是一条消息的提示消息'
            });
        }.bind(this), 200)

      },

      open6() {
        this.$notify.error({
          title: '错误',
          message: '这是一条错误的提示消息'
        });
      },      
      handleSelect(key, keyPath) {
        console.log(key, keyPath);
      },
      handleOpen(key, keyPath) {
        console.log(key, keyPath);
      },
      handleClose(key, keyPath) {
        console.log(key, keyPath);
      },
        handleIconClick(ev) {
            if(this.tableData1.length == 0){
                // this.tableData1 = this.tableData.Clone()
                extend(this.tableData1, this.tableData);
            }
            if(this.input2){
              var tmp = []
              for(var ii = 0; ii < this.tableData1.length; ii ++)
              {
                  for(var jj in this.tableData1[ii])
                  {
                      if(("" + this.tableData1[ii][jj]).indexOf(this.input2) >= 0){
                          tmp.push(this.tableData1[ii])
                          break
                      }
                  }
              }
              this.tableData = tmp
            }else{
              this.tableData = this.tableData1
            }
        }
    }
  }
var Ctor = Vue.extend(Main)
new Ctor().$mount('#app')
</script>
